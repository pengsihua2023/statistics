

# 条件概率与全概率公式、贝叶斯公式

*(Conditional Probability, Law of Total Probability, Bayes’ Theorem)*

---

## 一、条件概率（Conditional Probability）[TouTube link for reference](https://www.youtube.com/watch?v=H02B3aMNKzE)

### 1. 定义

* 在事件 **B 已经发生**的条件下，事件 **A 发生的概率**：

$$
P(A|B) = \frac{P(A \cap B)}{P(B)}, \quad P(B) > 0
$$

### 2. 特点

* 反映了事件之间的依赖关系。
* 当 $P(A|B) = P(A)$ 时，说明 A 与 B **相互独立 (Independence)**。

📍 **例子**：

* 一副扑克牌中，已知抽到的是红牌（B），再抽到“红心 A” (A) 的概率：

$$
P(A|B) = \frac{1/52}{26/52} = 1/26
$$

---

## 二、乘法公式（Multiplication Rule）

* **联合概率公式**：

$$
P(A \cap B) = P(B) \cdot P(A|B) = P(A) \cdot P(B|A)
$$

* 用于计算两个事件同时发生的概率。

---

## 三、全概率公式（Law of Total Probability）

### 1. 定义

* 如果 $\{B_1,B_2,\dots,B_n\}$ 构成一个完备事件组（相互独立，且并为样本空间 S），则：

$$
P(A) = \sum_{i=1}^n P(B_i) \cdot P(A|B_i)
$$

### 2. 意义

* 将复杂事件 A 的概率，分解为在不同条件下的加权平均。

📍 **例子**：
某疾病检出率：

* 男性患者比例 40%，女性 60%；  
* 男性得病概率 0.1，女性 0.05；  
计算总得病概率  

**已知条件：**

* 男性比例： $P(B_1) = 0.4$
* 女性比例： $P(B_2) = 0.6$
* 男性患病率： $P(A \mid B_1) = 0.1$
* 女性患病率： $P(A \mid B_2) = 0.05$



**事件定义：**

* $A$ ：随机抽取的一个人“患有此病”；
* $B_1$ ：该人是男性；
* $B_2$ ：该人是女性。



**根据全概率公式：**

$$
P(A) = P(B_1)P(A \mid B_1) + P(B_2)P(A \mid B_2)
$$



**代入数据计算：**

$$
P(A) = 0.4 \times 0.1 + 0.6 \times 0.05 = 0.07
$$



**结论：**

$$
\boxed{P(A) = 0.07}
$$

---

## 四、贝叶斯公式（Bayes’ Theorem）

### 1. 定义

* 已知结果 A，推断原因 $B_i$ 的概率。

$$
P(B_i|A) = \frac{P(B_i)\cdot P(A|B_i)}{\sum_{j=1}^n P(B_j)\cdot P(A|B_j)}
$$

### 2. 特点

* 将**先验概率 (Prior Probability)** P( $B_i$ ) 更新为 **后验概率 (Posterior Probability) P( $B_i$ |A)**。
* 是现代统计推断与机器学习中的重要工具。
  
---

📍 **例子**：
某疾病检测：

* 患病率 1%（先验概率）。
* 患病者检测阳性概率 0.9；未患病者误报率 0.05。
* 问检测阳性者实际患病的概率？


#### 🧩 1、明确事件定义

在这个例子中，我们研究的是“检测结果与疾病状态之间的关系”。定义如下：

|   符号  | 事件      | 含义                      |
| :---: | :------ | :---------------------- |
|  $A$  | 检测结果为阳性 | “检测呈阳性”这一结果（已知结果）       |
| $B_1$ | 患有此疾病   | “真正生病”这一原因              |
| $B_2$ | 没有此疾病   | “没有患病”这一原因，即 $\neg B_1$ |



#### 📘 2、对应概率含义

|    符号    | 含义             |           已知数值          |        |
| :------: | :------------- | :---------------------: | ------ |
| $P(B_1)$ | 患病的先验概率（人群患病率） |          $0.01$         |        |
| $P(B_2)$ | 未患病的概率         |          $0.99$         |        |
|   $P(A/ B_1)$          |    患病者检测为阳性的概率（真阳性率）    | $0.9$  |
|   $P(A/B_2)$          |    未患病者检测为阳性的概率（假阳性率）   | $0.05$ |
|  $P(B_1/A)$            | 检测阳性者实际患病的概率（我们要求的后验概率） | ？      |

---

#### 🧮 3、代入贝叶斯公式

$$
P(B_1|A) =
\frac{P(B_1) P(A|B_1)}
{P(B_1)P(A|B_1) + P(B_2)P(A|B_2)}
$$

代入数值：

$$
P(B_1|A) =
\frac{0.01 \times 0.9}{0.01 \times 0.9 + 0.99 \times 0.05}
= 0.154
$$

---

#### 🧠 4、解释结果

虽然检测准确率很高（真阳性率 90%，假阳性率仅 5%），
但因为**疾病很罕见（仅 1%）**，
最终检测阳性者中只有约 **15.4%** 真正患病。

这体现了典型的 **“基数率陷阱”（base rate fallacy）**——
如果忽略先验概率（患病率），会高估检测结果的可信度。

---

✅ **总结：**

* $A$：检测阳性（结果）
* $B_1$：患病（原因之一）
* $B_2$：未患病（原因之二）
* 目标：求在检测阳性时真正患病的概率 $P(B_1|A)$

---

是否希望我帮你把这段解释整理成 **Markdown + LaTeX 教材版**，可直接插入你的学习笔记或 PPT？（包含事件定义表和公式排版）


## 五、知识结构图

```
条件概率 (P(A|B))
   ↓ → 乘法公式
全概率公式 → 分解复杂概率
   ↓
贝叶斯公式 → 根据结果反推原因（先验 → 后验）
```

---

✅ **总结**：

* **条件概率 (Conditional Probability)**：描述事件间的依赖性。
* **全概率公式 (Law of Total Probability)**：用条件概率分解复杂事件。
* **贝叶斯公式 (Bayes’ Theorem)**：利用观测结果修正对原因的判断，是现代统计与机器学习的重要基石。

---


